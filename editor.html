<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="css/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="css/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Brian by Kinka</title>
    <style type="text/css">
    .editor-inner { width: 100%; }
    .md-preview {width: 48%; float: left; margin-left: 20px;}
    </style>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Brian</h1>
        <h2>I'm trying to build a blog in github, purely in js.</h2>
        <a href="https://github.com/Kinka/kinka.github.com" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix editor-inner">
        <textarea id="markdown"></textarea>
        <div id="md_preview" class="md-preview"></div>  
      </div>
    </div>
<link rel="stylesheet" type="text/css" href="markitup/skins/markitup/style.css" />
<link rel="stylesheet" type="text/css" href="markitup/sets/markdown/style.css" />
<link rel="stylesheet" href="css/solarized_light.css">
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>    
<script type="text/javascript" src="markitup/jquery.markitup.js"></script>
<script type="text/javascript" src="markitup/sets/markdown/set.js"></script>
<script type="text/javascript" src="js/markdown.js"></script>
<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>
<script type="text/javascript">
$(document).ready(function()  {
    hljs.tabReplace = '    ';
    hljs.initHighlighting();

    var mdRaw = $('#markdown'),
        mdPreview = $('#md_preview');
    mdRaw.markItUp(myMarkdownSettings);
    mdRaw.bind('input', function(e) {
        var text = mdRaw.val();
        // text = hljs.highlightAuto(text).value;
        text = markdown.toHTML(text);
        mdPreview.html(text);
        highlightCode();
    });

});

function highlightCode() {
    var codes = document.querySelectorAll('pre > code');
    for(var i=0, len=codes.length; i<len; i++) {
        hljs.highlightBlock(codes[i]);
    }
}

//在光标位置插入文字
function insertText(obj, str) {
    obj.focus();
    if (document.selection) {
        var sel = document.selection.createRange();
        sel.text = str;
    } else if (typeof obj.selectionStart == 'number'
            && typeof obj.selectionEnd == 'number') {
        var startPos = obj.selectionStart, endPos = obj.selectionEnd, cursorPos = startPos, tmpStr = obj.value;
        obj.value = tmpStr.substring(0, startPos) + str
                + tmpStr.substring(endPos, tmpStr.length);
        cursorPos += str.length;
        obj.selectionStart = obj.selectionEnd = cursorPos;
    } else {
        obj.value += str;
    }
}
</script>
  </body>
</html>